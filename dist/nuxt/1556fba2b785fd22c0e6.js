(window.webpackJsonp=window.webpackJsonp||[]).push([[1,23],{106:function(t,o,e){"use strict";e.r(o);e(21),e(190);var n={components:{cartcontrol:e(34).default},props:{selectFoods:{type:Array,default:function(){return[]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(o){t+=o.price*o.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(o){t+=o.count}),t},payDesc:function(){if(0===this.totalPrice)return"¥".concat(this.minPrice,"元起送");if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差¥".concat(t,"元起送")}return"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){return!!this.totalCount&&!this.fold}},methods:{toggleList:function(){this.totalCount&&(this.fold=!this.fold)},hideList:function(){this.fold=!0},empty:function(){this.selectFoods.forEach(function(t){t.count=0})},pay:function(){this.totalPrice<this.minPrice||window.alert("支付".concat(this.totalPrice,"元"))},addFood:function(t){this.drop(t)},drop:function(t){for(var o=0;o<this.balls.length;o++){var e=this.balls[o];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},beforeDrop:function(t){for(var o=this.balls.length;o--;){var e=this.balls[o];if(e.show){var n=e.el.getBoundingClientRect(),a=n.left-32,i=-(window.innerHeight-n.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(i,"px,0)"),t.style.transform="translate3d(0,".concat(i,"px,0)");var s=t.getElementsByClassName("inner-hook")[0];s.style.webkitTransform="translate3d(".concat(a,"px,0,0)"),s.style.transform="translate3d(".concat(a,"px,0,0)")}}},dropping:function(t,o){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)",t.addEventListener("transitionend",o)})},afterDrop:function(t){var o=this.dropBalls.shift();o&&(o.show=!1,t.style.display="none")}}},a=(e(348),e(13)),i=Object(a.a)(n,function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"shopcart"},[n("div",{staticClass:"content",on:{click:t.toggleList}},[n("div",{staticClass:"content-left"},[n("div",{staticClass:"logo-wrapper"},[n("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[t.totalCount<=0?n("span",{staticClass:"icon-shopping_cart"},[n("img",{attrs:{src:e(346),alt:""}})]):n("span",{staticClass:"icon-shopping_cart highlight"},[n("img",{attrs:{src:e(347),alt:""}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount>0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),n("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice)+"元")]),t._v(" "),n("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),t._v(" "),n("div",{staticClass:"content-right"},[n("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payDesc))])])]),t._v(" "),n("div",{staticClass:"ball-container"},t._l(t.balls,function(o,e){return n("div",{key:e},[n("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.show,expression:"ball.show"}],staticClass:"ball"},[n("div",{staticClass:"inner inner-hook"})])])],1)})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"mark",on:{click:t.toggleList}}),t._v(" "),n("transition",{attrs:{name:"fold"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[n("div",{staticClass:"list-header"},[n("h1",{staticClass:"title"},[t._v("已选商品")]),t._v(" "),n("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),n("div",{ref:"listContent",staticClass:"list-content"},[n("ul",t._l(t.selectFoods,function(o,e){return n("li",{key:e,staticClass:"food"},[n("span",{staticClass:"name"},[t._v(t._s(o.name))]),t._v(" "),n("div",{staticClass:"price"},[n("span",[t._v("￥"+t._s(o.price*o.count))])]),t._v(" "),n("div",{staticClass:"cartcontrol-wrapper"},[n("cartcontrol",{attrs:{food:o},on:{add:t.addFood}})],1)])}))])])])],1)},[],!1,null,null,null);i.options.__file="shopcart.vue";o.default=i.exports},186:function(t,o,e){"use strict";o.a={IS_RELEASE:!0,BASE_URL:"//elm-api.caibowen.net",IMG_URL:"https://easytuan.gitee.io/node-elm-api/public/",HEADERS:{"Content-Type":"application/json;charset=UTF-8"},TIMEOUT:12e3}},187:function(t,o,e){"use strict";e(51);var n=e(3),a=e.n(n),i=e(70),s=e.n(i),r=e(186),c=e(69);s.a.defaults.baseURL=r.a.BASE_URL,s.a.defaults.timeout=r.a.TIMEOUT,s.a.defaults.headers=r.a.HEADERS,s.a.interceptors.request.use(function(t){return r.a.IS_RELEASE||console.log("".concat((new Date).toLocaleString(),"【 M=").concat(t.url," 】P="),t.params||t.data),t},function(t){return Promise.reject(t)}),o.a=a()(regeneratorRuntime.mark(function t(){var o,e,n,a=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>0&&void 0!==a[0]?a[0]:{method:"GET"},e=!0,"POST"!==o.method.toUpperCase()&&"PUT"!==o.method.toUpperCase()&&"PATCH"!==o.method.toUpperCase()&&(e=!1),t.next=5,s()({method:o.method,url:o.url,data:e?o.data:null,params:e?null:o.data});case 5:if(!((n=t.sent).status>=200&&n.status<300)){t.next=12;break}return r.a.IS_RELEASE||console.log("".concat((new Date).toLocaleString(),"【接口响应：】"),n.data),"undefined"!=typeof window&&0!==n.data.code&&Object(c.Toast)(n.data.msg),t.abrupt("return",n.data);case 12:"undefined"!=typeof window&&0!==n.data.code&&Object(c.Toast)("请求错误");case 13:case"end":return t.stop()}},t,this)}))},193:function(t,o,e){var n=e(209);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e(18).default)("072daf24",n,!0,{sourceMap:!1})},196:function(t,o,e){"use strict";e.d(o,"c",function(){return i}),e.d(o,"d",function(){return s}),e.d(o,"a",function(){return r}),e.d(o,"b",function(){return c});var n=e(187),a="/shopping",i=function(t){return Object(n.a)({url:"".concat(a,"/restaurants"),method:"GET",data:t})},s=function(t){return Object(n.a)({url:"".concat(a,"/seller"),method:"GET",data:t})},r=function(t){return Object(n.a)({url:"".concat(a,"/goods"),method:"GET",data:t})},c=function(t){return Object(n.a)({url:"".concat(a,"/ratings"),method:"GET",data:t})}},200:function(t,o,e){var n=e(349);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e(18).default)("040c1ca4",n,!0,{sourceMap:!1})},208:function(t,o,e){"use strict";var n=e(193);e.n(n).a},209:function(t,o,e){(t.exports=e(17)(!1)).push([t.i,"\n.cartcontrol{display:flex;align-items:center\n}\n.cartcontrol .inner{width:24px;height:24px\n}\n.cartcontrol .cart-count{display:inline-block;vertical-align:top;width:25px;text-align:center;font-size:15px;color:#333\n}\n.cartcontrol .cart-add{display:inline-block;padding:6px;line-height:24px;font-size:24px;color:#00a0dc\n}",""])},34:function(t,o,e){"use strict";e.r(o);var n=e(0),a={props:["food"],methods:{addCart:function(t){this.food.count?this.food.count++:n.default.set(this.food,"count",1),this.$emit("add",t.target)},decreaseCart:function(t){this.food.count&&this.food.count--}}},i=(e(208),e(13)),s=Object(i.a)(a,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"cartcontrol"},[e("svg",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"inner",attrs:{fill:"rgb(35, 149, 255)"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.decreaseCart(o)}}},[e("use",{attrs:{"xlink:href":"#cart-minus"}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),t._v(" "),e("svg",{attrs:{width:"24",height:"24",fill:"rgb(35, 149, 255)"},on:{click:t.addCart}},[e("use",{attrs:{"xlink:href":"#cart-add"}})])])},[],!1,null,null,null);s.options.__file="cartcontrol.vue";o.default=s.exports},346:function(t,o,e){t.exports=e.p+"img/8ecc9f8.svg"},347:function(t,o,e){t.exports=e.p+"img/e50a008.svg"},348:function(t,o,e){"use strict";var n=e(200);e.n(n).a},349:function(t,o,e){(t.exports=e(17)(!1)).push([t.i,'\n.shopcart{position:fixed;left:0;bottom:0;z-index:50;width:100%;height:48px;background:#000\n}\n.shopcart .content{display:flex;background:rgba(61,61,63,.9);font-size:0;color:hsla(0,0%,100%,.4)\n}\n.shopcart .content .content-left{flex:1\n}\n.shopcart .content .content-left .logo-wrapper{display:inline-block;vertical-align:top;position:relative;top:-10px;margin:0 12px;padding:6px;width:56px;height:56px;box-sizing:border-box;border-radius:50%;background-image:radial-gradient(circle,#363636 6.26667vw,#444 0)\n}\n.shopcart .content .content-left .logo-wrapper .logo{width:100%;height:100%;border-radius:50%;text-align:center;background:#2b343c\n}\n.shopcart .content .content-left .logo-wrapper .logo.highlight{background:#00a0dc\n}\n.shopcart .content .content-left .logo-wrapper .logo .icon-shopping_cart{margin:0 auto;padding:20% 0;display:block;width:60%;height:60%;color:#80858a\n}\n.shopcart .content .content-left .logo-wrapper .num{position:absolute;top:0;right:0;width:24px;height:16px;line-height:16px;text-align:center;border-radius:16px;font-size:9px;font-weight:700;color:#fff;box-shadow:0 4px 8px 0 rgba(0,0,0,.4);background-image:linear-gradient(-90deg,#ff7416,#ff3c15 98%)\n}\n.shopcart .content .content-left .price{display:inline-block;vertical-align:top;margin-top:12px;line-height:24px;padding-right:12px;box-sizing:border-box;border-right:1px solid hsla(0,0%,100%,.1);font-size:16px;font-weight:700\n}\n.shopcart .content .content-left .price.highlight{color:#fff\n}\n.shopcart .content .content-left .desc{display:inline-block;vertical-align:top;margin:12px 0 0 12px;line-height:24px;font-size:10px\n}\n.shopcart .content .content-right{flex:0 0 105px;width:105px\n}\n.shopcart .content .content-right .pay{height:48px;line-height:48px;text-align:center;font-size:14px;font-weight:700\n}\n.shopcart .content .content-right .pay.not-enough{color:#fff\n}\n.shopcart .content .content-right .pay.enough{background:#00b43c;color:#fff\n}\n.shopcart .ball-container .ball{position:fixed;left:32px;bottom:22px;z-index:200\n}\n.shopcart .ball-container .ball.drop-transition{transition:all .4s cubic-bezier(.49,-.29,.75,.41)\n}\n.shopcart .ball-container .ball.drop-transition .inner{width:16px;height:16px;border-radius:50%;background:#00a0dc;transition:all .4s\n}\n.shopcart .mark{position:fixed;top:0;width:100%;height:100%;background:rgba(0,0,0,.4);z-index:-2\n}\n.shopcart .shopcart-list{position:absolute;left:0;top:0;z-index:-1;width:100%;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)\n}\n.shopcart .shopcart-list.fold-enter-active,.shopcart .shopcart-list.fold-leave-active{transition:all .5s\n}\n.shopcart .shopcart-list.fold-enter,.shopcart .shopcart-list.fold-leave-active{-webkit-transform:translateZ(0);transform:translateZ(0)\n}\n.shopcart .shopcart-list .list-header{height:40px;line-height:40px;padding:0 18px;background:#f3f5f7;border-bottom:1px solid rgba(7,17,27,.1)\n}\n.shopcart .shopcart-list .list-header .title{float:left;font-size:14px;color:#07111b\n}\n.shopcart .shopcart-list .list-header .empty{float:right;font-size:12px;color:#00a0dc\n}\n.shopcart .shopcart-list .list-content{padding:0 18px;max-height:217px;overflow:hidden;background:#fff\n}\n.shopcart .shopcart-list .list-content .food{display:flex;align-items:center;padding:12px 0;box-sizing:border-box;position:relative\n}\n.shopcart .shopcart-list .list-content .food:after{display:block;position:absolute;left:0;bottom:0;width:100%;border:1px solid rgba(7,17,27,.1);content:" "\n}\n.shopcart .shopcart-list .list-content .food .name{line-height:24px;font-size:14px;color:#07111b\n}\n.shopcart .shopcart-list .list-content .food .price{position:absolute;right:90px;bottom:12px;line-height:24px;font-size:14px;font-weight:700;color:#f01414\n}\n.shopcart .shopcart-list .list-content .food .cartcontrol-wrapper{position:absolute;right:0\n}',""])},350:function(t,o,e){var n=e(386);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e(18).default)("06723958",n,!0,{sourceMap:!1})},385:function(t,o,e){"use strict";var n=e(350);e.n(n).a},386:function(t,o,e){(t.exports=e(17)(!1)).push([t.i,'\n.goods-page{display:flex;background:#fff;width:100%\n}\n.goods-page .menu-wrapper{flex:0 0 80px;width:80px;height:calc(100vh - 38px);overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;background:#f8f8f8\n}\n.goods-page .menu-wrapper .menu-item{display:table;height:54px;padding:0 12px;line-height:14px\n}\n.goods-page .menu-wrapper .menu-item.current{position:relative;margin-top:-1px;z-index:10;background:#fff\n}\n.goods-page .menu-wrapper .menu-item.current .text{color:#333\n}\n.goods-page .menu-wrapper .menu-item .icon{display:inline-block;vertical-align:middle;width:12px;height:12px;margin-right:2px;background-size:12px 12px;background-repeat:no-repeat\n}\n.goods-page .menu-wrapper .menu-item .text{display:table-cell;width:56px;vertical-align:middle;font-size:12px;position:relative;color:#666\n}\n.goods-page .foods-wrapper{width:calc(100vw - 80px);height:calc(100vh - 38px);overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-bottom:60px\n}\n.goods-page .foods-wrapper .title{padding-left:14px;height:30px;line-height:30px;font-size:12px;color:#666\n}\n.goods-page .foods-wrapper .food-item{display:flex;margin:10px;padding-bottom:18px;position:relative\n}\n.goods-page .foods-wrapper .food-item:after{display:block;position:absolute;left:0;bottom:0;width:100%;content:" "\n}\n.goods-page .foods-wrapper .food-item:last-child{margin-bottom:0\n}\n.goods-page .foods-wrapper .food-item:last-child:after{display:none\n}\n.goods-page .foods-wrapper .food-item .icon{flex:0 0 80px;margin-right:10px\n}\n.goods-page .foods-wrapper .food-item .content{flex:1;position:relative\n}\n.goods-page .foods-wrapper .food-item .content .name{margin:2px 0 8px;height:14px;line-height:14px;font-size:14px;color:#07111b\n}\n.goods-page .foods-wrapper .food-item .content .desc,.goods-page .foods-wrapper .food-item .content .extra{line-height:10px;font-size:12px;color:#93999f;-webkit-transform:scale(.9) translateX(-6%);transform:scale(.9) translateX(-6%)\n}\n.goods-page .foods-wrapper .food-item .content .desc{margin-bottom:8px;line-height:12px;max-width:7.46667rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\n}\n.goods-page .foods-wrapper .food-item .content .extra .count{margin-right:12px\n}\n.goods-page .foods-wrapper .food-item .content .price{width:100%;font-weight:700;position:absolute;bottom:0;display:flex;justify-content:space-between\n}\n.goods-page .foods-wrapper .food-item .content .price .now{margin-right:8px;font-size:14px;color:#ff5339\n}\n.goods-page .foods-wrapper .food-item .content .price .old{text-decoration:line-through;font-size:10px;color:#93999f\n}\n.goods-page .foods-wrapper .food-item .content .price b{font-weight:400;font-size:18px\n}',""])},413:function(t,o,e){"use strict";e.r(o);e(21);var n=e(106),a=e(34),i=e(196),s={components:{shopcart:n.default,cartcontrol:a.default},props:{seller:{default:{}}},data:function(){return{goods:[],listHeight:[],scrollY:0,classMap:["decrease","discount","special","invoice","guarantee"],currentIndex:0,isScroll:!1}},computed:{selectFoods:function(){var t=[];return this.goods.forEach(function(o){o.foods.forEach(function(o){o.count&&t.push(o)})}),t}},created:function(){},mounted:function(){var t=this;i.a().then(function(o){0===o.code&&(t.goods=o.data)}),document.querySelector(".foods-wrapper").addEventListener("scroll",this.throttle(function(){t.isScroll||t.goods.map(function(o,e){var n=document.querySelector("#a"+e).getBoundingClientRect().top,a=document.querySelector(".foods-wrapper").getBoundingClientRect().top;n-a<100&&n-a>-100&&(t.currentIndex=e)})},50))},methods:{selectMenu:function(t){t!==this.currentIndex&&(this.currentIndex=t,this.animateScroll("#a"+t,".foods-wrapper",50))},animateScroll:function(t,o,e){var n=this;this.isScroll=!0;var a,i=document.querySelector(t).getBoundingClientRect().top-document.querySelector(o).getBoundingClientRect().top+document.querySelector(o).scrollTop,s=0;window.requestAnimationFrame(function t(r){s<=i?(document.querySelector(o).scrollTo(0,s),a=window.requestAnimationFrame(t)):(window.cancelAnimationFrame(a),n.isScroll=!1),s+=e})},throttle:function(t,o){var e=null;return function(){var n=this,a=arguments;clearTimeout(e),e=setTimeout(function(){t.apply(n,a)},o)}}}},r=(e(385),e(13)),c=Object(r.a)(s,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"goods-page"},[e("div",{staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,function(o,n){return e("li",{key:n,staticClass:"menu-item",class:{current:t.currentIndex===n},on:{click:function(o){t.selectMenu(n,o)}}},[e("span",{staticClass:"text"},[t._v("\n          "+t._s(o.name)+"\n        ")])])}))]),t._v(" "),e("div",{staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(o,n){return e("li",{key:n,staticClass:"food-list food-list-hook"},[e("h1",{staticClass:"title",attrs:{id:"a"+n}},[t._v(t._s(o.name))]),t._v(" "),e("ul",t._l(o.foods,function(o,n){return e("li",{key:n,staticClass:"food-item border-1px"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:o.icon}})]),t._v(" "),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(o.name))]),t._v(" "),e("p",{staticClass:"desc"},[t._v(t._s(o.description))]),t._v(" "),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(o.sellCount)+"份")]),e("span",[t._v("好评率"+t._s(o.rating)+"%")])]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"),e("b",[t._v(t._s(o.price))])]),t._v(" "),e("cartcontrol",{attrs:{food:o}})],1)])])}))])}))]),t._v(" "),e("shopcart",{ref:"shopcart",attrs:{"select-foods":t.selectFoods,"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice}})],1)},[],!1,null,null,null);c.options.__file="index.vue";o.default=c.exports}}]);